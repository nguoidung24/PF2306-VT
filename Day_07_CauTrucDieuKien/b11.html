<!DOCTYPE html>
<html>

    <head>
        <meta charset='utf-8'>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css' rel='stylesheet'>
        <title>Page Title</title>
    </head>

    <body class='bg-dark text-light'>
        <div class="container border mt-1 rounded border-light">
            <div class="row btn-outline-danger mt-2">
                <div class="col">
                    <input class="bg-dark text-light form-control" type="text" id="ipC">
                </div>
            </div>
            <div class="row mt-1">
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">1</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">2</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">3</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText,'+')" class="btn btn-secondary w-100">+</button>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">4</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">5</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">6</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText,'+-')" class="btn btn-secondary w-100">-</button>
                </div>
            </div>
            <div class="row mt-1">
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">7</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">8</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">9</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText,'*')" class="btn btn-secondary w-100">x</button>
                </div>
            </div>
            <div class="row mt-1 mb-1">
                <div class="col">
                    <button name="nutBam" onclick="trang(this.innerText)" class="btn btn-secondary w-100">C</button>
                </div>
                <div class="col">
                    <button id="khong" name="nutBam" onclick="addIp(this.innerText)" class="btn btn-secondary w-100">0</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="kq()" class="btn btn-secondary w-100">=</button>
                </div>
                <div class="col">
                    <button name="nutBam" onclick="addIp(this.innerText,'*/')" class="btn btn-secondary w-100">รท</button>
                </div>
            </div>
        </div>
    </body>
    <script type="text/javascript">
    let ipC = document.getElementById('ipC');
    let khong = document.getElementById('khong');
    let bieuthuc = '';

    function trang() {
        bieuthuc = ipC.value = "";
    }

    function addIp(num, pheptinh = num) {
        ipC.value += num;
        bieuthuc += pheptinh;
        khong.disabled = (pheptinh == "*/");
    }

    function nhan(numStr) {
        let tich = 1;
        let arr = numStr.split('*');
        for (var num of arr) {
            tich *= (!isNaN(num)) ? Number(num) : (1 / Number(num.substring(1)));
        }
        return tich;
    }

    function kq() {
        let tong = 0;
        let arr = bieuthuc.split('+');
        for (var num of arr) {
            tong += (!isNaN(num)) ? Number(num) : nhan(num);
        }
        ipC.value += " = " + tong;
    }
    </script>
</html>